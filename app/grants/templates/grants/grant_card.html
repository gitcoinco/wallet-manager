{% comment %}
  Copyright (C) 2018 Gitcoin Core

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published
  by the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program. If not, see <http://www.gnu.org/licenses/>.
{% endcomment %}
{% load i18n static humanize i18n %}

<div class="grant-item">
  <a class="grant-item__hero" href="{% url 'grants:details' grant.id %}">
    <img src="{% if grant.logo %}
      {{ grant.logo.url }}
    {% else %}
      http://placehold.it/300
    {% endif %}" alt="{{ grant.title|truncatechars:60 }}">
  </a>
  <div class="grant-item__content">
    <h2 class="grant-item__title"><a href="{% url 'grants:details' grant.id %}">{{ grant.title|truncatechars:60 }}</a></h2>
    <p class="grant-item__pitch">{{ grant.description|truncatechars:135 }}</p>
    <div class="grant-item__footer">
      <div class="grant-item__owner">
        <div class="grant-item__owner-image">
          <img src="{% if grant.admin_profile.avatar_url %}{{ grant.admin_profile.avatar_url }}{% else %}http://placehold.it/300{% endif %}">
        </div>
        <div class="grant-item__owner-handle">{% trans 'by' %} <span>{{ grant.admin_profile.handle|default:'Anonymous' }}</span></div>
      </div>
      <div class="progress progress--small">
          <div class="progress-bar" role="progressbar" style="width: {{ grant.percentage_done }}%" aria-valuenow="{{ grant.percentage_done }}%" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
      <!-- <div class="progress-bar">
        <div class="progress" style="width: {{ grant.percentage_done }}%"></div>
      </div> -->
      <div class="grant-item__funding">
        <div class="grant-item__funding-item">
          <div class="grant-item__funding-number">{{ grant.amount_received|floatformat:2|intcomma }} ETH</div>
          <div class="grant-item__funding-label">{% trans 'Current' %}</div>
        </div>
        <div class="grant-item__funding-item">
          <div class="grant-item__funding-number">{{ grant.amount_goal|floatformat:2|intcomma }} ETH</div>
          <div class="grant-item__funding-label">{% trans 'Goal' %}</div>
        </div>
      </div>
    </div>
  </div>
</div>
