{% comment %}
Copyright (C) 2018 Gitcoin Core

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published
by the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program. If not, see <http://www.gnu.org/licenses/>.
{% endcomment %}
{% load humanize static i18n %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="{% static "v2/css/search_bar.css" %}">
    {% include 'shared/head.html' %}
    {% include 'shared/cards.html' %}
    <link rel="stylesheet" href="{% static "v2/css/grants/card.css" %}">
  </head>
  <body class="interior {{ active }} grant g-font-muli">
    {% include 'shared/tag_manager_2.html' %}
    <div class="container-fluid header dash">
      {% include 'shared/top_nav.html' with class='d-md-flex' %}
      {% include 'grants/nav.html' %}

      <div class="container py-5">
        <div class="grants-hero white">
          <div class="row">
            <div class="col-12 col-md-6 order-md-last mb-5 mb-md-0">
              <div class="embed-responsive embed-responsive-16by9">
                <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/Hx1iJ_K3D8k?rel=0&showinfo=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
              </div>
            </div>
            <div class="m-auto col-12 col-md-6 offset-lg-1 col-lg-5">
              <h1 class="font-title-xl">{% trans 'Provide sustainable funding for Open Source with Gitcoin Grants' %}</h1>
              <p class="mt-4 pt-1 mb-5 font-subheader">
                {% blocktrans %}
                Gitcoin Grants, powered by the <a target="_blank" rel="noopener noreferrer" href="http://1337alliance.com/">EIP 1337 standard</a>
                , are a fast, easy and secure way to provide recurring token contributions to your favorite OSS maintainers. <br/><br/>
                Show your appreciation for maintainers in your dependency tree with a Gitcoin Grant today.
                {% endblocktrans %}
              </p>
              <a class="btn btn-gc-blue" href="{% url 'grants:new' %}">
                {% trans 'Create a Grant' %}
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-fluid py-5 grants-search">
      <div class="container">
        <form method="POST" id="search_form">
          {% csrf_token %}
          <div class="row">
            <div class="search px-0 col-7 col-sm-9 col-md-5 offset-md-2 col-lg-6 form__flex-group">
              <input type="search" class="form__input" id="search_grants" name="search_grants" placeholder="Search Grants">
            </div>
            <div class="col-3 col-lg-1 px-0">
              <button class="btn btn-gc-blue">
                <span class="d-sm-inline">{% trans "Search" %}</span>
                <i class="ml-2 fas fa-search"></i>
              </button>
            </div>
          </div>
          <div class="row mt-5">
            <div class="col-12 col-md-6 pt-1 text-center text-sm-left pl-sm-0">
              {{ grants_count }} {% trans "Grants available on" %} <b>mainnet</b>.
            </div>
            <div class="col-12 col-md-6 pt-1 font-caption order_by d-md-inline text-center text-sm-right">
              <div class="heading">{% trans "SORT" %}</div>
              <select name="sort_option" id="sort_option">
                <option value="-created_on">{% trans "Created: Recent" %}</option>
                <option value="created_on">{% trans "Created: Oldest" %}</option>
                <option value="-amount_goal">{% trans "Value: Highest" %}</option>
                <option value="amount_goal">{% trans "Value: Lowest" %}</option>
              </select>
            </div>
          </div>
        </form>
      </div>
    </div>

    {% if grants %}
    <div class="container-fluid grants-container">
      <div class="container">
      {% for grant in grants %}
      {% if forloop.counter0|divisibleby:3 %} <div class="row"> {% endif %}
        <div class="col-12 col-md-6 col-lg-4 mb-4">
          {% include 'grants/card.html' %}
        </div>
      {%  if forloop.counter|divisibleby:3 or forloop.last %} </div> {% endif %}
      {% endfor %}
      </div>
    </div>
    {% endif %}

    {% include 'shared/bottom_notification.html' %}
    {% include 'shared/analytics.html' %}
    {% include 'shared/footer_scripts.html' %}
    {% include 'shared/footer.html' %}
  </body>

  <!-- jQuery -->
  <script src="{% static "v2/js/abi.js" %}"></script>
  <script src="{% static "v2/js/tokens.js" %}"></script>
  <script src="{% static "v2/js/pages/shared_bounty_mutation_estimate_gas.js" %}"></script>
  <script src="{% static "v2/js/ipfs-api.js" %}"></script>
  <script src="{% static "v2/js/ipfs.js" %}"></script>
  <script src="{% static "v2/js/grants/index.js" %}"></script>
</html>
