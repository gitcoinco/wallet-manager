{% extends 'emails/template.html' %}
{% comment %}
  Copyright (C) 2020 Gitcoin Core

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published
  by the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program. If not, see <http://www.gnu.org/licenses/>.
{% endcomment %}
{% load i18n static humanize avatar_tags kudos_extras %}
{% block content %}
<style>
  #header {
    max-height: fit-content !important;
    background-color: #15053F !important;
  }
  #logo {
    max-height: fit-content !important;
  }
  .primary-content {
    padding: 0;
    background-color: #15053F;
    margin: 0;
  }
  #footer {
    background-color: #15053F;
  }
  .roundup {
    padding-top: 2em;
    background-color: #ffffff;
    line-height: 20px;
  }
  a {
    text-decoration: none !important;
  }
  p, li, a{
    text-decoration: none;
    line-height: 26px;
    font-size: 16px;
    list-style: none;
  }
  .intro li{
    margin-bottom: 15px;
  }
  h1{
    color: black;
    font-weight: bold;
  }
  h3{
    color: #0d0860;
    font-weight: bold;
  }
  h5{
    color: #aeaeae;
  }
  h4 {
    padding: 0 !important;
  }
  a{
    text-decoration: underline;
  }

  @media screen and (max-width: 35.5em) {
    .roundup {
      margin-left: 20%;
      margin-right: 20%;
    }

    #header span{
      display: block !important;
    }

    #logo {
      width: 100% !important;
    }
  }

  @media screen and (min-width: 48em) {
    .roundup {
      margin-left: 20%;
      margin-right: 20%;
    }
  }
</style>
<div class="roundup">
  <div>
    <h1>{% trans "The Gitcoin Weekly" %}</h1>
  </div>

  <div class='intro' style="text-align: left;">
    <div style="padding-left: 2em; padding-right: 2em;">
      {{ intro|safe }}
      <div style="display: flex;">
        <a href="https://twitter.com/pixelant">
          <img height="48" width="48" style="border-radius: 50px;" src="{% static "v2/images/pixelantdesign.png" %}" />
          <a style="align-self: center; margin-left: 20px;" href="https://twitter.com/pixelant">@pixelant</a>
        </a>
      </div>
    </div>

    {% if kudos_friday %}
    <div style="text-align: center;">
      {{ kudos_friday|safe }}
    </div>
    {% endif %}

    {% if sponsor %}
      <div style="padding: 5px 15px 15px 15px; background-color: #f2f6f9; text-align: center;">
        <p style="text-transform: uppercase; font-size: 12px; color: rgba(0,0,0,0.4);">Sponsored by <a href="{{ sponsor.link }}" style="font-weight: bold; color: rgba(0,0,0,0.8);">{{ sponsor.name }}</a></p>
        <a href="{{ sponsor.link }}" style="text-align: center; color: #0d0860; font-weight: bold; font-size: 16px; display: block; text-decoration: none; line-height: 19px;">{{ sponsor.title }}</a>
        {% for paragraph in sponsor.body %}
          <p style="font-size: 14px; text-align: center; line-height: 18px;">{{ paragraph | safe }}</p>
        {% endfor %}
        <div style="margin-bottom: 1em; margin-top: 2em;">
          <a class="button" style="padding: 8px 16px; font-size: 15px;" href="{{ sponsor.link }}">{{ sponsor.cta }}</a>
        </div>
        <small style="text-align: center; color: rgba(0,0,0,0.4); font-size: 10px; line-height: 12px;">Interested in sponsoring The Gitcoin Weekly?
          <a href="https://share.hsforms.com/1--0ESFkIQ1m-y8wCW-3Q_g3bjxf" style="color: rgba(0,0,0,0.4); font-size: 10px; line-height: 12px;">Let us know</a>
        </small>
      </div>
    {% endif %}
  </div>

  {% if highlights %}
    <h3>{% trans "Last Week's Highlights" %}</h3>
    <h4>{% trans "Community Members growing open source" %}</h4>

    <div style="text-align: center;">
      {% for highlight in highlights %}
        <div style="display:flex; flex-direction:column; margin-bottom: 5px;">
          <div style="display: flex; justify-content: center; margin-bottom: 1rem;">
            {% if highlight.who_link %}
              <img style="border-radius: 20px;" src="{% avatar_url highlight.who%}" width=30px height=30px>
              <a style="align-self: center; margin-left: 5px; font-weight: bold; text-decoration: none;" href="{% url "profile" highlight.who %}">{{ highlight.who }}</a>
            {% else %}
              * <strong style="align-self: center;">{{ highlight.who }}</strong>
            {% endif %}
          </div>
          {{ highlight.what }}
          <div style="margin-top: 1em; margin-bottom: 1em">
            {% if highlight.link %}
            <a style="align-self: center; padding: 8px 16px; font-size: 15px;" class="button" href="{{ highlight.link }}">{{ highlight.link_copy }}</a>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
    <hr>
  {% endif %}

  <div>
    <h3>{% trans "Open Funded Issues" %}</h3>
    <h4>{% trans "Grow Open Source &amp; Make Some ETH" %}</h4>
  </div>

  {% for bounty in bounties %}
    {% include 'emails/bounty.html' with bounty=bounty.obj small=1 primer=bounty.primer %}
  {% endfor %}

  <div class="text-center">
    <p>{% trans "Don't see anything above that strikes your fancy?" %}</p>
    <p>{% trans "There are more issues in the Gitcoin Issue Explorer:" %}</p>

    <div style="margin-bottom: 2em;">
      <a class="button" href="{% url "explorer" %}">{% trans "View Explorer" %}</a>
    </div>
  </div>
  <hr>
  {% if leaderboard %}
  <div style="background-color: #000000; color: #ffffff;">
    <h3 style="color: #ffffff; padding-top: 1em;">{% trans "Who's leading the Leaderboard?" %}</h3>
    <h4>{% trans "See the top Gitcoin Network Members For the last 90 Days" %}</h4>

    <div class="text-left">
      {% for key, package in leaderboard.items %}
        <div style="width: 30%; display: inline-block; min-width: 250px;">
          <h4>{{ package.title }}</h4>
          <ul>
            {% for leaderboard_item in package.items %}
            <li style="list-style:none; margin-bottom: 5px;">
              {{ leaderboard_item.rank }}. <img style="border-radius: 20px;" src="{% avatar_url leaderboard_item.profile %}" width=30px height=30px>
              <a style="font-weight: bold; text-decoration: none;" href="{% url "profile" leaderboard_item.github_username %}">{{ leaderboard_item.github_username }}</a> : ${{ leaderboard_item.amount|floatformat:2 }}
            </li>
          {% endfor %}
          </ul>
        </div>
      {% endfor %}
    </div>
    <br>
    <br>
    <div style="padding-bottom: 2em;">
      <a class="button" href="{% url "leaderboard" 'quarterly_payers' %}">{% trans "View Leaderboard" %}</a>
    </div>
  </div>
  {% endif %}
  <hr>

  {% if kudos_highlights %}
    <h3>{% trans "Kudos" %}</h3>
    <h4>{% trans "Recognition throughout the platform" %}</h4>
    <div style="text-align: center; display: flex; justify-content: center;">
      <ul style="text-align: center; padding-left: 20px;">
        {% for kudos in kudos_highlights %}
        {% if kudos.recipient_profile and kudos.sender_profile %}
          <li style="list-style:none; margin: 5px; padding: 15px 30px; min-height: 310px; display: inline-block; float:left; border: 1px solid #cccccc; border-radius: 5px; width: 220px;">
              <a style="font-weight: bold; text-decoration: none;" href="{% url "profile" kudos.recipient_profile.handle %}">{{ kudos.recipient_profile.handle }}</a> received <strong>{{ kudos.kudos_token_cloned_from.name|humanize_name }}</strong> from <a style="font-weight: bold; text-decoration: none;" href="{% url 'profile' kudos.sender_profile.handle %}">{{ kudos.sender_profile.handle }}</a><br>
            <a href="{% url 'kudos_details' kudos.kudos_token_cloned_from.pk kudos.kudos_token_cloned_from.name  %}">

              <img style="max-width: 120px;" src="{{ kudos.kudos_token_cloned_from.img_url }}"></a>

            {% if kudos.comments_public %}
              <br>
              <i>
                Comment: {{ kudos.comments_public }}
              </i>
            {% endif %}
          </li>
        {% endif %}
        {% endfor %}
      </ul>
      <br style="clear: both;">
    </div>
    <br>
    <br>
  {% endif %}
</div>
{% endblock %}
