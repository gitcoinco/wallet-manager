{% comment %}
    Copyright (C) 2021 Gitcoin Core

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as published
    by the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program. If not, see <http://www.gnu.org/licenses/>.

{% endcomment %}

<create-collection-modal ref="createCollection" inline-template>
  <b-modal id="create-collection" @hide="showCreateCollection = false" :visible="showCreateCollection" size="lg" center hide-header hide-footer>
    <template>
      <div class="mt-2 mb-3 mx-4">
        <div class="mb-4 mx-n2 row justify-content-end">
          <b-button @click="close()" type="button" variant="white" class="close" data-dismiss="modal" aria-label="Close"></button>
            <span aria-hidden="true">&times;</span>
          </b-button>
        </div>
        <div class="mb-3 text-center">
          <h1 class="mb-5 font-bigger-4 font-weight-bold">Save Cart as Collection</h1>
        </div>
        <div class="col-12 mb-5 text-center">
          <img class="mx-auto" width="75%" style="max-width: 728px;" :src="imgURL" />
        </div>
        <div class="mb-3">
          <p class="font-subheader">Collection Name.</p>
          <b-form-input v-model="collectionTitle" placeholder="What would your collection be called?"></b-form-input>
        </div>
        <div class="mb-2">
          <p class="font-subheader">Description (Optional)</p>
          <b-form-textarea rows="3" max-rows="6" :state=" collectionDescription.length == 0 ? null : collectionDescription.length < 140" v-model="collectionDescription" placeholder="Short description about your collection"></b-form-textarea>
          <p class="text-right mt-2">[[ collectionDescription.length ]]/140</p>
        </div>

        <div class="d-flex justify-content-center justify-content-sm-end pt-1">
          <b-button
            @click="createCollection()"
            variant="primary"
            class="col-md-4 col-sm-12"
            :disabled="selectedCollection || !isValidCollection"
          >
            Create a Collection
          </b-button>
        </div>

        <div class="mb-3" v v-if="collections.length">
          <div class="hr my-5">
            <span class="hr-text text-muted">or</span>
          </div>
          <p class="font-subheader mt-3 mb-0">Save to existing collection</p>
          <b-form-select v-model="selectedCollection" text-field="title" value-field="id" :options="collections" size="md" class="mt-3">
            <template #first>
              <b-form-select-option :value="false">Please select an option...</b-form-select-option>
            </template>
          </b-form-select>
        </div>

        <div class="d-flex justify-content-center justify-content-sm-end pt-1">
          <b-button
            @click="createCollection()"
            variant="outline-primary"
            class="col-md-4 col-sm-12"
            :disabled="!selectedCollection"
          >
            Save to Collection
          </b-button>
        </div>
        <br>
      </div>
    </template>
  </b-modal>
</create-collection-modal>
