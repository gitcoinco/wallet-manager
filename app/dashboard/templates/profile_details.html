{% load i18n email_obfuscator %}
{% load humanize %}
{% load static %}
<!DOCTYPE html>
<html lang="en">

  <head>
    {% include 'shared/head.html' %}
    {% include 'shared/cards_pic.html' %}
  </head>

  <body class="interior {{active}}">
    {% include 'shared/tag_manager_2.html' %}
    <div class="container-fluid header profile-header dash">
      {% include 'shared/nav.html' %}
      <div class="container">
        <div class="row">
          <div class="col-6">
            <div class="clearfix">
              <img class="profile-header__avatar mr-4" src="{{profile.avatar_url}}">
              <span class="profile-header__handle">
                {{profile.data.name}}<br>
                <small>{{profile.handle}}</small>
              </span>
            </div>
            {% if profile.data.bio %}
              <div class="profile-header__bio my-4">
                {{profile.data.bio}}
              </div>
            {% endif %}

            <ul class="profile-header__links clearfix my-4">
              <li>
                <a href="{{profile.data.blog}}">
                  <img src="{% static "v2/images/social/web.png" %}">{{profile.data.blog}}
                </a>
              </li>
              {% if profile.data.email and user.is_authenticated %}
                <li>
                  <a href="mailto:{{profile.data.email | obfuscate}}">
                    <img src="{% static "v2/images/social/mail.png" %}" alt="Medium">{{profile.data.email | obfuscate}}
                  </a>
                </li>
              {% endif %}
              <li>
                <a href="{{profile.data.html_url}}?tab=repositories">
                  <img src="{% static "v2/images/social/github.png" %}" alt="Medium">{{profile.data.login}}
                </a>
              </li>
            </ul>
          </div>
          <div class="col-3">
            <div class="profile-header__stats profile-header__stats--contributor card">
              <div class="card-header">
                Contributor
              </div>
              <div class="card-body">
                <ul>
                  <li><span class="highlight">###</span> bounties completed</li>
                  <li><span class="highlight">###</span> ETH collected</li>
                  <li><span class="highlight">###</span> contributor</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-3">
            <div class="profile-header__stats profile-header__stats--funder card">
              <div class="card-header">
                Funder
              </div>
              <div class="card-body">
                <ul>
                  <li><span class="highlight">###</span> bounties funded</li>
                  <li><span class="highlight">###</span> ETH funded</li>
                  <li><span class="highlight">###</span> funder</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="profile-bouties"></div>
    </div>

    {% include 'shared/result.html' %}

    {% include 'shared/bottom_notification.html' %}
    {% include 'shared/analytics.html' %}
    {% include 'shared/footer_scripts.html'%}
    {% include 'shared/rollbar.html' %}
    {% include 'shared/footer.html' %}
    {% include 'shared/messages.html' %}

  </body>
  <!-- jQuery -->
  <script src="{% static "v2/js/abi.js" %}"></script>
  <script src="{% static "v2/js/tokens.js" %}"></script>
  <script src="{% static "v2/js/pages/profile_details.js" %}"></script>
  <script src="{% static "v2/js/shared.js" %}"></script>

  <script type="text/javascript">
    $(document).ready(function() {
      $.get('/api/v0.1/bounties/?bounty_owner_github_username={{profile.handle}}&status=open', function(results) {
        results = sanitizeAPIResults(results);
        var tmpl = $.templates('#result');
        var html;

        for (var i = 0; i < results.length; i++) {
          html = tmpl.render(results[i]);
          $('.profile-bouties').append(html);
        }
      });
    });
  </script>

</html>
