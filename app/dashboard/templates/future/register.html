{% comment %}
    Copyright (C) 2019 Gitcoin Core

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as published
    by the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program. If not, see <http://www.gnu.org/licenses/>.

{% endcomment %}
{% load i18n static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    {% include 'shared/head.html' %}
    {% include 'shared/cards_pic.html' %}
</head>
  <body class="{{active}} g-font-muli">
    {% include 'shared/tag_manager_2.html' %}
    {% include 'shared/top_nav.html' with class='d-md-flex' %}
    <div class="container-fluid header dash">
      {% include 'shared/nav.html' %}
    </div>

    <div class="container-fluid">
    <h1>Register for a Salary</h1>
    <p style="color: red;">Contracts are not yet audited and deployed.</p>
    <p><em>It is to implement <a target="_blank" href="https://github.com/gitcoinco/web/issues/8183">this PR</a>.
      This is a work-in-progress clone of <a href="https://vporton.github.io/future-salary/#/">that app</a>.</em></p>

    <p><q>Whitepaper</q> (how it works):
      <a href="{% static 'docs/science-salaries.odt' %}">LibreOffice Writer</a>,
      <a href="{% static 'docs/science-salaries.pdf' %}">PDF</a>.</p>

    <p>
      See also: <a href="{% url 'future_donate' %}">Donate/bequest for science, free software, or climate.</a>
      <br/> 
      <small>Just bequest all your funds here.</small>
    </p>

    <script>
      // TODO: Display a notification that a condition is being created.
      function onConditionCreated(conditionId) {
        $.post("{% url 'future_do_register' %}", {conditionId})
          .then(console.log)
          .catch(e => alert(e.responseJSON.error)); // better alert
      }
    </script>

    {% if alreadyRegistered %}
    <p><strong>You are already registered.</strong></p>
    {% else %}
    <donations-register prefix="{% static 'donations-widget-vue-binary/' %}" conditionCreated="onConditionCreated"/>
    {% endif %}

    {% include 'shared/bottom_notification.html' %}
    {% include 'shared/analytics.html' %}
    {% include 'shared/footer_scripts.html' %}
    {% include 'shared/footer.html' %}
    <script src="{% static 'donations-widget-vue-binary/Register/donations-register.min.js' %}"></script>
    <script>
      window.registerComponent.addRegisterCallback(onConditionCreated);
    </script>
  </body>
</html>
