!function(){var e="undefined"!=typeof exports&&exports||"undefined"!=typeof define&&{}||this;function t(e){if(!((t=e)instanceof HTMLElement||t instanceof SVGElement))throw new Error("an HTMLElement or SVGElement is required; got "+e);var t}function n(e,n){t(e);var o=e.querySelectorAll("image"),r=o.length,i=function(){0===r&&n()},a=function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),o=new Image;o.crossOrigin="anonymous";var a,s=e.getAttributeNS("http://www.w3.org/1999/xlink","href");s=s||e.getAttribute("href"),(a=s)&&0==a.lastIndexOf("http",0)&&-1==a.lastIndexOf(window.location.host)&&(s+=(-1===s.indexOf("?")?"?":"&")+"t="+(new Date).valueOf()),s?(o.src=s,o.onload=function(){t.width=o.width,t.height=o.height,n.drawImage(o,0,0),e.setAttributeNS("http://www.w3.org/1999/xlink","href",t.toDataURL("image/png")),r--,i()},o.onerror=function(){console.log("Could not load "+s),r--,i()}):(r--,i())};i();for(var s=0;s<o.length;s++)a(o[s])}function o(e,t,n){for(var o=t.selectorRemap,r=t.modifyStyle,i=t.modifyCss||function(e,t){return(e=o?o(e):e)+" { "+(r?r(t):t)+" }\n"},a="",s=[],l=document.styleSheets,c=0;c<l.length;c++){var d;try{d=l[c].cssRules}catch(e){console.warn("Stylesheet could not be loaded: "+l[c].href);continue}if(null!=d)for(var f,u=0;u<d.length;u++,f=null){var g=d[u];if(void 0!==g.style){var w;try{w=g.selectorText}catch(e){console.warn('The following CSS rule has an invalid selector: "'+g+'"',e)}try{w&&(f=e.querySelector(w)||e.parentNode&&e.parentNode.querySelector(w))}catch(e){console.warn('Invalid CSS selector "'+w+'"',e)}if(f)a+=i(g.selectorText,g.style.cssText);else if(g.cssText.match(/^@font-face/)){var p=/url\(["']?(.+?)["']?\)/,h=g.cssText.match(p),v=h&&h[1]||"";v.match(/^data:/)&&(v=""),"about:blank"===v&&(v=""),v?(v.startsWith("../")?v=l[c].href+"/../"+v:v.startsWith("./")&&(v=l[c].href+"/."+v),s.push({text:g.cssText,fontUrlRegexp:p,format:m(v),url:v})):a+=g.cssText+"\n"}}}}function m(e){for(var t={woff2:"font/woff2",woff:"font/woff",otf:"application/x-font-opentype",ttf:"application/x-font-ttf",eot:"application/vnd.ms-fontobject",sfnt:"application/font-sfnt",svg:"image/svg+xml"},n=Object.keys(t),o=0;o<n.length;++o){var r=n[o];if(e.indexOf("."+r)>0)return t[r]}return console.error("Unknown font format for "+e+"; Fonts may not be working correctly"),"application/octet-stream"}function b(e){e.length>0?function(t){var n=new XMLHttpRequest;function o(n){console.warn("Failed to load font from: "+t.url),console.warn(n),a+=t.text+"\n",b(e)}function r(t,n){var o='url("data:'+t.format+";base64,"+n+'")';a+=t.text.replace(t.fontUrlRegexp,o)+"\n",setTimeout(function(){b(e)},0)}n.addEventListener("load",function(){var e=function(e){for(var t="",n=new Uint8Array(e),o=n.byteLength,r=0;r<o;r++)t+=String.fromCharCode(n[r]);return window.btoa(t)}(n.response);r(t,e)}),n.addEventListener("error",o),n.addEventListener("abort",o),n.open("GET",t.url),n.responseType="arraybuffer",n.send()}(e.pop()):n(a)}!function(e){if(e.length>0){var t=e.pop();!function(t){var n=new XMLHttpRequest;function o(n){console.warn("Failed to load font from: "+t.url),console.warn(n),a+=t.text+"\n",b(e)}function r(t,n){var o='url("data:'+t.format+";base64,"+n+'")';a+=t.text.replace(t.fontUrlRegexp,o)+"\n",setTimeout(function(){b(e)},0)}n.addEventListener("load",function(){var e=function(e){for(var t="",n=new Uint8Array(e),o=n.byteLength,r=0;r<o;r++)t+=String.fromCharCode(n[r]);return window.btoa(t)}(n.response);r(t,e)}),n.addEventListener("error",o),n.addEventListener("abort",o),n.open("GET",t.url),n.responseType="arraybuffer",n.send()}(t)}else n(a)}(s)}function r(e,t,n){var o=e.viewBox&&e.viewBox.baseVal&&e.viewBox.baseVal[n]||null!==t.getAttribute(n)&&!t.getAttribute(n).match(/%$/)&&parseInt(t.getAttribute(n))||e.getBoundingClientRect()[n]||parseInt(t.style[n])||parseInt(window.getComputedStyle(e).getPropertyValue(n));return void 0===o||null===o||isNaN(parseFloat(o))?0:o}function i(e){for(var t=window.atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(t.length),r=new Uint8Array(o),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return new Blob([o],{type:n})}e.prepareSvg=function(e,i,a){t(e),(i=i||{}).scale=i.scale||1,i.responsive=i.responsive||!1;var s="http://www.w3.org/2000/xmlns/";n(e,function(){var t,n,l=document.createElement("div"),c=e.cloneNode(!0);if("svg"==e.tagName)t=i.width||r(e,c,"width"),n=i.height||r(e,c,"height");else{if(!e.getBBox)return void console.error("Attempted to render non-SVG element",e);var d=e.getBBox();t=d.x+d.width,n=d.y+d.height,c.setAttribute("transform",c.getAttribute("transform").replace(/translate\(.*?\)/,""));var f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.appendChild(c),c=f}c.setAttribute("version","1.1"),c.getAttribute("xmlns")||c.setAttributeNS(s,"xmlns","http://www.w3.org/2000/svg"),c.getAttribute("xmlns:xlink")||c.setAttributeNS(s,"xmlns:xlink","http://www.w3.org/1999/xlink"),i.responsive?(c.removeAttribute("width"),c.removeAttribute("height"),c.setAttribute("preserveAspectRatio","xMinYMin meet")):(c.setAttribute("width",t*i.scale),c.setAttribute("height",n*i.scale)),c.setAttribute("viewBox",[i.left||0,i.top||0,t,n].join(" "));for(var u=c.querySelectorAll("foreignObject > *"),g=0;g<u.length;g++)u[g].getAttribute("xmlns")||u[g].setAttributeNS(s,"xmlns","http://www.w3.org/1999/xhtml");l.appendChild(c),o(e,i,function(e){var o=document.createElement("style");o.setAttribute("type","text/css"),o.innerHTML="<![CDATA[\n"+e+"\n]]>";var r=document.createElement("defs");if(r.appendChild(o),c.insertBefore(r,c.firstChild),a){var i=l.innerHTML;i=i.replace(/NS\d+:href/gi,'xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href'),a(i,t,n)}})})},e.svgAsDataUri=function(t,n,o){e.prepareSvg(t,n,function(e){var t,n="data:image/svg+xml;base64,"+window.btoa((t='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [<!ENTITY nbsp "&#160;">]>'+e,t=(t=encodeURIComponent(t)).replace(/%([0-9A-F]{2})/g,function(e,t){var n=String.fromCharCode("0x"+t);return"%"===n?"%25":n}),decodeURIComponent(t)));o&&o(n)})},e.svgAsPngUri=function(n,o,r){t(n),(o=o||{}).encoderType=o.encoderType||"image/png",o.encoderOptions=o.encoderOptions||.8;var i=function(e,t,n){var i=document.createElement("canvas"),a=i.getContext("2d");i.width=t,i.height=n;var s,l=window.devicePixelRatio||1;i.style.width=i.width+"px",i.style.height=i.height+"px",i.width*=l,i.height*=l,a.setTransform(l,0,0,l,0,0),o.canvg?o.canvg(i,e):a.drawImage(e,0,0),o.backgroundColor&&(a.globalCompositeOperation="destination-over",a.fillStyle=o.backgroundColor,a.fillRect(0,0,i.width,i.height));try{s=i.toDataURL(o.encoderType,o.encoderOptions)}catch(e){if("undefined"!=typeof SecurityError&&e instanceof SecurityError||"SecurityError"==e.name)return void console.error("Rendered SVG images cannot be downloaded in this browser.");throw e}r(s)};o.canvg?e.prepareSvg(n,o,i):e.svgAsDataUri(n,o,function(e){var t=new Image;t.onload=function(){i(t,t.width,t.height)},t.onerror=function(){console.error("There was an error loading the data URI as an image on the following SVG\n",window.atob(e.slice(26)),"\n","Open the following link to see browser's diagnosis\n",e)},t.src=e})},e.download=function(e,t){if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(i(t),e);else{var n=document.createElement("a");if("download"in n){n.download=e,n.style.display="none",document.body.appendChild(n);try{var o=i(t),r=URL.createObjectURL(o);n.href=r,n.onclick=function(){requestAnimationFrame(function(){URL.revokeObjectURL(r)})}}catch(e){console.warn("This browser does not support object URLs. Falling back to string URL."),n.href=t}n.click(),document.body.removeChild(n)}else window.open(t,"_temp","menubar=no,toolbar=no,status=no")}},e.saveSvg=function(n,o,r){t(n),r=r||{},e.svgAsDataUri(n,r,function(t){e.download(o,t)})},e.saveSvgAsPng=function(n,o,r){t(n),r=r||{},e.svgAsPngUri(n,r,function(t){e.download(o,t)})},"undefined"!=typeof define&&define(function(){return e})}();
